var TKIT=TKIT||{};TKIT.ContextMenu={},TKIT.ContextMenu.create=(a,b,e,f)=>{TKIT.ContextMenu.active&&TKIT.ContextMenu.destroy(),TKIT.ContextMenu.active=!0,TKIT.ContextMenu.centerX=e||0,TKIT.ContextMenu.centerY=f||0,TKIT.ContextMenu.items=a,TKIT.ContextMenu.actions=b,TKIT.ContextMenu.objects=[],document.addEventListener('mousemove',TKIT.ContextMenu.Events.mousemove,!1),document.addEventListener('click',TKIT.ContextMenu.Events.click,!1),TKIT.ContextMenu.createMenu()},TKIT.ContextMenu.createMenu=()=>{for(let a=0;a<TKIT.ContextMenu.items.length;a+=1)((b)=>{const e=TKIT.ContextMenu.items[b];setTimeout(()=>{TKIT.ContextMenu.createItem(e,b)},100*b)})(a)},TKIT.ContextMenu.createItem=(a,b)=>{const e=a.labelText,f=a.action,g=64,h=document.createElement('canvas');h.id='TKITContextMenuCanvas',document.body.appendChild(h);const j=document.getElementById('TKITContextMenuCanvas');j.width=1024,j.height=256;const k=j.getContext('2d');k.fillStyle='white',k.fillRect(0,0,j.width,j.height),k.font='112px Arial',k.fillStyle='black',k.fillText(e,32,164);const l=j.toDataURL('image/png'),m=new Image;m.src=l,document.body.appendChild(m);const n=new THREE.Vector3;n.set(2*(TKIT.ContextMenu.centerX/window.innerWidth)-1,-(2*(TKIT.ContextMenu.centerY/window.innerHeight))+1,0.5),n.unproject(TKIT.camera);const o=n.sub(TKIT.camera.position).normalize(),p=-TKIT.camera.position.z/o.z,q=TKIT.camera.position.clone().add(o.multiplyScalar(p)),r=new THREE.Texture(m);r.needsUpdate=!0;const s=new THREE.BoxGeometry(256,g,100),t=new THREE.MeshPhongMaterial({map:r,color:13492478,specular:1118481,shininess:30,shading:THREE.SmoothShading}),u=new THREE.Mesh(s,t);u.position.set(q.x,q.y-b*g,-1e3),u.contextmenuaction=f;const v=TKIT.ContextMenu.objects.push(u);TKIT.scene.add(TKIT.ContextMenu.objects[v-1]),setInterval(()=>{0>u.position.z&&(u.position.z+=100)},16)},TKIT.ContextMenu.destroy=()=>{if(TKIT.ContextMenu.active){TKIT.ContextMenu.active=!1,document.removeEventListener('mousemove',TKIT.ContextMenu.Events.mousemove),document.removeEventListener('click',TKIT.ContextMenu.Events.click);for(let a=0;a<TKIT.ContextMenu.objects.length;a+=1)TKIT.scene.remove(TKIT.ContextMenu.objects[a]);TKIT.ContextMenu.objects=[]}},TKIT.ContextMenu.Events={},TKIT.ContextMenu.Events.mousemove=(a)=>{const b=TKIT.IntersectObject.intersects(a,TKIT.scene,TKIT.camera);for(let e=0;e<TKIT.ContextMenu.objects.length;e+=1)TKIT.ContextMenu.objects[e].material.color.setHex(13492478);0<b.length&&b[0].object.material.color.setHex(16777215)},TKIT.ContextMenu.Events.click=(a)=>{const b=TKIT.IntersectObject.intersects(a,TKIT.scene,TKIT.camera);0<b.length&&TKIT.ContextMenu.actions[b[0].object.contextmenuaction](),TKIT.ContextMenu.destroy()};
var TKIT=TKIT||{};TKIT.init=(a,b)=>{TKIT.scene=a,TKIT.camera=b};
var TKIT=TKIT||{};TKIT.IntersectObject={},TKIT.IntersectObject.raycaster=new THREE.Raycaster,TKIT.IntersectObject.mouse=new THREE.Vector2,TKIT.IntersectObject.intersects=(a,b,c)=>{TKIT.IntersectObject.mouse.x=2*(a.clientX/window.innerWidth)-1,TKIT.IntersectObject.mouse.y=-(2*(a.clientY/window.innerHeight))+1,TKIT.IntersectObject.raycaster.setFromCamera(TKIT.IntersectObject.mouse,c);const d=TKIT.IntersectObject.raycaster.intersectObjects(b.children);return d};
var TKIT=TKIT||{};TKIT.scenes={},TKIT.scenes.generate=(a)=>{let b=a;'undefined'==typeof a&&(b='basic');const c=TKIT.scenes.types[b];'function'==typeof c&&c()},TKIT.scenes.types={},TKIT.scenes.types.basic=()=>{TKIT.scene=new THREE.Scene,TKIT.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1e4),TKIT.camera.position.z=600,TKIT.light=new THREE.PointLight(16777215,1,0),TKIT.light.position.set(0,0,1e3),TKIT.scene.add(TKIT.light),TKIT.renderer=new THREE.WebGLRenderer({antialias:!0}),TKIT.renderer.setClearColor(15790320),TKIT.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(TKIT.renderer.domElement),TKIT.render=()=>{requestAnimationFrame(TKIT.render),TKIT.renderer.render(TKIT.scene,TKIT.camera)},TKIT.render(),window.addEventListener('resize',()=>{TKIT.camera.aspect=window.innerWidth/window.innerHeight,TKIT.camera.updateProjectionMatrix(),TKIT.renderer.setSize(window.innerWidth,window.innerHeight)})},TKIT.scenes.types.forest=()=>{};
